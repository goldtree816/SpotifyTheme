<section class="featured-collections">
  <link rel="stylesheet" href="{{ 'featured-collections.css' | asset_url }}">
  <div class="featured-collections__header">
    <h2 class="featured-collections__title">{{ section.settings.heading | default: 'Featured Products' }}</h2>
    <p class="featured-collections__subtitle">{{ section.settings.subheading | default: 'Discover our handpicked favorites.' }}</p>
  </div>
  <div class="featured-collections__grid">
    {% assign featured_collection = collections[section.settings.collection] %}
    {% if featured_collection and featured_collection.products.size > 0 %}
      {% for product in featured_collection.products limit: 4 %}
        <div class="featured-collection">
          <div class="featured-product__image-container">
            {% if product.featured_image %}
              <img src="{{ product.featured_image | img_url: '400x400' }}" alt="{{ product.title | escape }}" class="featured-product__image" loading="lazy" />
            {% endif %}
          </div>
          <div class="featured-collection__content">
            <div class="featured-product__title">{{ product.title }}</div>
            <div class="featured-product__price">{{ product.price | money }}</div>
            <a href="{{ product.url }}" class="featured-collection__cta">Shop Now</a>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <div>No featured products found. Please select a collection in the section settings.</div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Featured Collections",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Featured Products"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Section Subheading",
      "default": "Discover our handpicked favorites."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Featured Collection"
    }
  ],
  "presets": [
    {
      "name": "Featured Collections"
    }
  ]
}
{% endschema %}