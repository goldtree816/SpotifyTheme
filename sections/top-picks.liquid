<div class="top-picks">
  <h2 class="top-picks-heading">TOP PICKS FOR YOU</h2>
  <div class="top-picks-row">
    <div class="top-picks-label">Men</div>
    <div class="top-picks-shoes-wrapper">
      <div class="top-picks-shoes top-picks-slider" id="men-slider">
        {% for block in section.blocks %}
          {% if block.type == 'men' %}
            {% assign product = all_products[block.settings.product] %}
            <div class="top-pick-card big">
              {% if block.settings.image %}
                <img src="{{ block.settings.image | image_url: width: 400 }}" alt="{{ product.title }}" class="top-pick-img" loading="lazy" width="400" height="180">
              {% elsif product and product.featured_image %}
                <img src="{{ product.featured_image | img_url: '400x' }}" alt="{{ product.title }}" class="top-pick-img" loading="lazy" width="400" height="180">
              {% endif %}
              <div class="top-pick-title">{{ product.title }}</div>
              <div class="top-pick-price">{{ product.price | money }}</div>
              <a href="/products/{{ product.handle }}" class="top-pick-btn">Shop Now</a>
            </div>
          {% endif %}
        {% endfor %}
      </div>
      {%- assign men_count = 0 -%}
      {%- for block in section.blocks -%}
        {%- if block.type == 'men' -%}
          {%- assign men_count = men_count | plus: 1 -%}
        {%- endif -%}
      {%- endfor -%}
      <button class="slider-arrow left" onclick="slideTopPicks('men-slider', -1)" {% if men_count <= 4 %}style="display:none"{% endif %}>&#8592;</button>
      <button class="slider-arrow right" onclick="slideTopPicks('men-slider', 1)" {% if men_count <= 4 %}style="display:none"{% endif %}>&#8594;</button>
    </div>
  </div>
  <div class="top-picks-row">
    <div class="top-picks-label">Women</div>
    <div class="top-picks-shoes-wrapper">
      <div class="top-picks-shoes top-picks-slider" id="women-slider">
        {% for block in section.blocks %}
          {% if block.type == 'women' %}
            {% assign product = all_products[block.settings.product] %}
            <div class="top-pick-card big">
              {% if block.settings.image %}
                <img src="{{ block.settings.image | image_url: width: 400 }}" alt="{{ product.title }}" class="top-pick-img" loading="lazy" width="400" height="180">
              {% elsif product and product.featured_image %}
                <img src="{{ product.featured_image | img_url: '400x' }}" alt="{{ product.title }}" class="top-pick-img" loading="lazy" width="400" height="180">
              {% endif %}
              <div class="top-pick-title">{{ product.title }}</div>
              <div class="top-pick-price">{{ product.price | money }}</div>
              <a href="/products/{{ product.handle }}" class="top-pick-btn">Shop Now</a>
            </div>
          {% endif %}
        {% endfor %}
      </div>
      {%- assign women_count = 0 -%}
      {%- for block in section.blocks -%}
        {%- if block.type == 'women' -%}
          {%- assign women_count = women_count | plus: 1 -%}
        {%- endif -%}
      {%- endfor -%}
      <button class="slider-arrow left" onclick="slideTopPicks('women-slider', -1)" {% if women_count <= 4 %}style="display:none"{% endif %}>&#8592;</button>
      <button class="slider-arrow right" onclick="slideTopPicks('women-slider', 1)" {% if women_count <= 4 %}style="display:none"{% endif %}>&#8594;</button>
    </div>
  </div>
  <div class="top-picks-row">
    <div class="top-picks-label">Kids</div>
    <div class="top-picks-shoes-wrapper">
      <div class="top-picks-shoes top-picks-slider" id="kids-slider">
        {% for block in section.blocks %}
          {% if block.type == 'kids' %}
            {% assign product = all_products[block.settings.product] %}
            <div class="top-pick-card big">
              {% if block.settings.image %}
                <img src="{{ block.settings.image | image_url: width: 400 }}" alt="{{ product.title }}" class="top-pick-img" loading="lazy" width="400" height="180">
              {% elsif product and product.featured_image %}
                <img src="{{ product.featured_image | img_url: '400x' }}" alt="{{ product.title }}" class="top-pick-img" loading="lazy" width="400" height="180">
              {% endif %}
              <div class="top-pick-title">{{ product.title }}</div>
              <div class="top-pick-price">{{ product.price | money }}</div>
              <a href="/products/{{ product.handle }}" class="top-pick-btn">Shop Now</a>
            </div>
          {% endif %}
        {% endfor %}
      </div>
      {%- assign kids_count = 0 -%}
      {%- for block in section.blocks -%}
        {%- if block.type == 'kids' -%}
          {%- assign kids_count = kids_count | plus: 1 -%}
        {%- endif -%}
      {%- endfor -%}
      <button class="slider-arrow left" onclick="slideTopPicks('kids-slider', -1)" {% if kids_count <= 4 %}style="display:none"{% endif %}>&#8592;</button>
      <button class="slider-arrow right" onclick="slideTopPicks('kids-slider', 1)" {% if kids_count <= 4 %}style="display:none"{% endif %}>&#8594;</button>
    </div>
  </div>
</div>

<style>
.top-picks { padding: 32px 0; }
.top-picks-heading { text-align: center; margin-bottom: 32px; font-size: 2rem; font-weight: bold; }
.top-picks-row { display: flex; flex-direction: column; align-items: center; margin-bottom: 32px; position: relative; }
.top-picks-label { width: auto; font-weight: bold; font-size: 1.2rem; margin-bottom: 16px; margin-top: 0; text-align: center; }
.top-picks-shoes-wrapper { position: relative; width: 1120px; overflow: hidden; display: flex; align-items: center; margin: 0 auto; }
.top-picks-shoes { display: flex; gap: 32px; transition: transform 0.3s; }
.top-pick-card.big { width: 250px; min-width: 250px; background: #f7f7f7; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
.top-pick-img { width: 100%; height: 180px; object-fit: contain; background: #fff; }
.top-pick-title, .top-pick-price { text-align: center; width: 100%; margin: 0 auto; }
.top-pick-title { font-size: 1.1rem; margin: 12px 0 4px 0; font-weight: bold; }
.top-pick-price { font-size: 1.1rem; font-weight: bold; margin-bottom: 8px; }
.top-pick-btn { color: #fff; background: #111; border: none; border-radius: 4px; padding: 8px 16px; text-decoration: none; font-size: 1rem; margin-bottom: 12px; display: inline-block; text-align: center; transition: background 0.2s, color 0.2s; }
.top-pick-btn:hover { background: #0071e3; color: #fff; }
.slider-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: #fff; border: 1px solid #ccc; border-radius: 50%; width: 36px; height: 36px; font-size: 1.5rem; cursor: pointer; z-index: 2; }
.slider-arrow.left { left: 0; }
.slider-arrow.right { right: 0; }
</style>
<script>
function slideTopPicks(id, dir) {
  var slider = document.getElementById(id);
  if (!slider) return;
  var cardWidth = 282; // 250px + 32px gap
  var visible = 4;
  var total = slider.children.length;
  var maxSlide = Math.max(0, total - visible);
  var current = parseInt(slider.getAttribute('data-slide')) || 0;
  var next = current + dir;
  next = Math.max(0, Math.min(next, maxSlide));
  slider.style.transform = 'translateX(' + (-next * cardWidth) + 'px)';
  slider.setAttribute('data-slide', next);
}
</script>

{% schema %}
{
  "name": "Top Picks",
  "blocks": [
    {
      "type": "men",
      "name": "Men's Product",
      "limit": 6,
      "settings": [
        { "type": "product", "id": "product", "label": "Select Product" },
        { "type": "image_picker", "id": "image", "label": "Custom Photo (optional)" }
      ]
    },
    {
      "type": "women",
      "name": "Women's Product",
      "limit": 6,
      "settings": [
        { "type": "product", "id": "product", "label": "Select Product" },
        { "type": "image_picker", "id": "image", "label": "Custom Photo (optional)" }
      ]
    },
    {
      "type": "kids",
      "name": "Kids' Product",
      "limit": 6,
      "settings": [
        { "type": "product", "id": "product", "label": "Select Product" },
        { "type": "image_picker", "id": "image", "label": "Custom Photo (optional)" }
      ]
    }
  ],
  "presets": [
    { "name": "Top Picks" }
  ]
}
{% endschema %} 